<form [formGroup]="form" (ngSubmit)="submit()" class="p-4 w-50 m-auto mt-4 border rounded bg-light shadow">
  <h4 class="text-center text-primary mb-4">
    <i class="bi bi-calendar-check-fill me-2"></i> Mark Attendance
  </h4>

  <!-- Group Selection -->
  <div class="mb-3">
    <label class="form-label">Select Group</label>
    <select class="form-select" formControlName="groupId" (change)="onGroupChange()">
      <option [ngValue]="null">-- Select Group --</option>
      <option *ngFor="let g of groups" [value]="g.groupsId">{{ g.name }} - {{ g.courseName }}</option>
    </select>
  </div>

  <!-- Student Selection -->
  <div class="mb-3" *ngIf="students.length > 0">
    <label class="form-label">Select Student</label>
    <select class="form-select" formControlName="studentId">
      <option [ngValue]="null">-- Select Student --</option>
      <option *ngFor="let s of students" [value]="s.userId">{{ s.name }} - {{ s.phoneNumber }}</option>
    </select>
  </div>

  <!-- Date -->
  <div class="mb-3">
    <label class="form-label">Date</label>
    <input type="date" class="form-control" formControlName="date" />
  </div>

  <!-- Status -->
  <div class="mb-3">
    <label class="form-label d-block">Attendance Status</label>
    <div class="form-check form-check-inline">
      <input type="radio" class="form-check-input" formControlName="status" [value]="1" id="present" />
      <label for="present" class="form-check-label">Present</label>
    </div>
    <div class="form-check form-check-inline">
      <input type="radio" class="form-check-input" formControlName="status" [value]="2" id="absent" />
      <label for="absent" class="form-check-label">Absent</label>
    </div>
    <div class="form-check form-check-inline">
      <input type="radio" class="form-check-input" formControlName="status" [value]="3" id="late" />
      <label for="late" class="form-check-label">Late</label>
    </div>
  </div>

  <!-- Exception Session -->
  <div class="mb-3 form-check">
    <input class="form-check-input" type="checkbox" formControlName="isExcepctionSession" id="exception" />
    <label for="exception" class="form-check-label">Exception Session</label>
  </div>

  <!-- Submit Button -->
  <div class="d-flex justify-content-between align-items-center">
    <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
      <i class="bi bi-check2-circle me-1"></i> Submit Attendance
    </button>

    <!-- View Absent Only Button -->
    <button routerLink="admin/student-report" type="button" class="btn btn-outline-primary" >
      <i class="bi bi-person-x-fill me-1"></i> View Attendance
    </button>
  </div>
</form>
